# å®˜æ–¹æ–‡æ¡£ï¼šhttps://book.egernapp.com
#
# Author:https://github.com/Repcz
# TG:https://t.me/QVQ_Channel
# ä»¥ ';' æˆ– '#' æˆ– '//' å¼€å¤´çš„é…ç½®æ–‡ä»¶è¡Œä¸ºæ³¨é‡Šè¡Œ
#
# é€‚é… Egern 1.16.0(296)åŠä»¥ä¸Š ç‰ˆæœ¬
#
# æœ€åæ›´æ–°æ—¶é—´: 2024-2-24 18:12
#
# ================

# TUNæ¨¡å¼
vif_only: true

# åŠ«æŒ DNS æœåŠ¡å™¨
hijack_dns:
- '*:53'

# è‡ªå®šä¹‰MaxMindæ•°æ®åº“
geoip_db_url: https://raw.githubusercontent.com/Masaiki/GeoIP2-CN/release/Country.mmdb

# é…ç½®ä¸ºä¸€ä¸ª DNS æœåŠ¡å™¨åœ°å€çš„æ•°ç»„ï¼Œè¿™äº›åœ°å€å¯ä»¥æ˜¯ IPv4 æˆ– IPv6 åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ "system" æ¥ä½¿ç”¨ç³»ç»Ÿ DNS æœåŠ¡å™¨ã€‚
dns_servers:  # DNSæœåŠ¡å™¨
- 119.29.29.29
- 233.5.5.5

# ä¸ºç‰¹å®šçš„ä¸»æœºåæŒ‡å®š IP åœ°å€æˆ–å…¶ä»–ä¸»æœºåï¼Œä»¥è¦†ç›– DNS æŸ¥è¯¢çš„ç»“æœ
hosts:        # DNSæ˜ å°„
  "dns.alidns.com": "223.5.5.5" # https://dns.alidns.com/dns-query
  "doh.pub": "1.12.12.12"       # https://doh.pub/dns-query
  "dot.pub": "1.12.12.12"       # dot.pub:853

# Egern å°†ä»…ä½¿ç”¨ dns_servers ä¸­çš„ DNS æœåŠ¡å™¨æ¥è§£æ SecureDns ä¸­ servers å­—æ®µçš„åŸŸåã€‚
# æ‰€æœ‰å…¶ä»– DNS æŸ¥è¯¢å°†é€šè¿‡ SecureDns ä¸­é…ç½®çš„å®‰å…¨ DNS æœåŠ¡å™¨è¿›è¡Œã€‚
secure_dns:   # å®‰å…¨çš„DNS
  servers:    # æ”¯æŒ DoHï¼ˆä»¥ https:// å¼€å¤´ï¼‰ã€DoTï¼ˆä»¥ tls:// å¼€å¤´ï¼‰å’Œ DoQï¼ˆä»¥ quic:// å¼€å¤´ï¼‰
  - https://dns.alidns.com/dns-query
  ecs: false  # æ˜¯å¦å¯ç”¨ EDNS å®¢æˆ·ç«¯å­ç½‘ (ECS)
  public_ip_lookup_url: ''      # å…¬ç½‘ IP æŸ¥æ‰¾ URLã€‚è¿™ä¸ª URL å¿…é¡»è¿”å›è®¾å¤‡çš„å…¬ç½‘ IP åœ°å€ã€‚

policy_groups:
- external:
    name: æ‰‹åŠ¨é€‰æ‹©
    type: select
    urls:
    - http://your-service-provider
    hidden: false
    icon: https://raw.githubusercontent.com/Repcz/Tool/X/Egern/Photo/ICON/Egern.png
- select:
    name: å›½å¤–ç½‘ç«™
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
- select:
    name: å›½é™…åª’ä½“
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
- select:
    name: è‹¹æœæœåŠ¡
    policies:
    - DIRECT
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png
- select:
    name: å¾®è½¯æœåŠ¡
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
- select:
    name: è°·æ­ŒæœåŠ¡
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png
- select:
    name: ç”µæŠ¥æ¶ˆæ¯
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png
- select:
    name: æ¨ç‰¹æ¶ˆæ¯
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
- select:
    name: OpenAI
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
- select:
    name: æ¸¸æˆå¹³å°
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png
- select:
    name: Emby
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*(.*))(?!.*((?i)é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|ğŸ®|(\b(GAME|USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\d{0,2}\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png
- select:
    name: å“”å“©å“”å“©
    policies:
    - DIRECT
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png
- select:
    name: å…œåº•åˆ†æµ
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
- auto_test:
    name: é¦™æ¸¯èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$
    tolerance: 50
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
- auto_test:
    name: ç¾å›½èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|United States)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$
    tolerance: 50
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
- auto_test:
    name: ç‹®åŸèŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$
    tolerance: 50
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
- auto_test:
    name: æ—¥æœ¬èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$
    tolerance: 50
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
- auto_test:
    name: å°æ¹¾èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: ^(?=.*((?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$
    tolerance: 50
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png

rules:
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/APNs.yaml
    policy: DIRECT
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Reject.yaml
    policy: REJECT
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/OpenAI.yaml
    policy: OpenAI
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Github.yaml
    policy: å¾®è½¯æœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/OneDrive.yaml
    policy: å¾®è½¯æœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Microsoft.yaml
    policy: å¾®è½¯æœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/YouTube.yaml
    policy: è°·æ­ŒæœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Google.yaml
    policy: è°·æ­ŒæœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Telegram.yaml
    policy: ç”µæŠ¥æ¶ˆæ¯
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Twitter.yaml
    policy: æ¨ç‰¹æ¶ˆæ¯
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Game.yaml
    policy: æ¸¸æˆå¹³å°
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Emby.yaml
    policy: Emby
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Bahamut.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Disney.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/HBO.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Netflix.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Spotify.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/PrimeVideo.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/TikTok.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/ProxyGFW.yaml
    policy: å›½å¤–ç½‘ç«™
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Apple.yaml
    policy: è‹¹æœæœåŠ¡
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Bilibili.yaml
    policy: å“”å“©å“”å“©
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Lan.yaml
    policy: DIRECT
- geoip:
    match: CN
    policy: DIRECT
- default:
    policy: å…œåº•åˆ†æµ
mitm:
  enabled: true