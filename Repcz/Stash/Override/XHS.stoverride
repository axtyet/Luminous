name: å°çº¢ä¹¦å»å¹¿å‘Š
desc: |-
  è¿‡æ»¤ä¿¡æ¯æµæ¨å¹¿ï¼Œç§»é™¤å›¾ç‰‡åŠè§†é¢‘æ°´å°ï¼Œå¦‚æœ‰å¼‚å¸¸ï¼Œè¯·å…ˆæ¸…é™¤ç¼“å­˜å†å°è¯•ã€‚
  ä½œè€…: @RuCu6 @fmz200 @å¯è‰ğŸ…¥ @Script-Hub
  æœ€åæ›´æ–°æ—¶é—´: 2025-03-16 19:40
icon: https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/RedPaper.png
category: âš™ï¸ â–¸ NoAds

http:

  mitm:
    - "edith.xiaohongshu.com"
    - "rec.xiaohongshu.com"
    - "www.xiaohongshu.com"

  url-rewrite:
    - >-
      ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/surprisebox\/(?:get_style|open|submit_action) - reject-dict
    - >-
      ^https:\/\/www\.xiaohongshu\.com\/api\/marketing\/box\/trigger\? - reject-dict
    - >-
      ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/(?:v2\/guide\/user_banner|v3\/note\/guide) - reject-dict
    - >-
      ^https:\/\/www\.xiaohongshu\.com\/api\/sns\/(?:v1\/ads\/resource|v2\/hey\/\w+\/hey_gallery) - reject-dict

  body-rewrite:
    - ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/search\/banner_list$ response-jq if (getpath([]) | has("data")) then (setpath(["data"]; {})) else . end
    - ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/search\/hot_list$ response-jq if (getpath(["data"]) | has("items")) then (setpath(["data","items"]; [])) else . end
    - ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v4\/search\/hint response-jq if (getpath(["data"]) | has("hint_words")) then (setpath(["data","hint_words"]; [])) else . end
    - ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v4\/search\/trending\? response-jq if (getpath(["data"]) | has("queries")) then (setpath(["data","queries"]; [])) else . end
    - ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v4\/search\/trending\? response-jq if (getpath(["data"]) | has("hint_word")) then (setpath(["data","hint_word"]; {})) else . end

  script:
    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/note\/(?:imagefeed|live_photo\/save)
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/system_service\/config\?
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v2\/system_service\/splash_config
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v2\/(?:note\/widgets|user\/followings\/followfeed)
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v4\/followfeed\?
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v5\/recommend\/user\/follow_recommend\?
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/(?:edith|rec)\.xiaohongshu\.com\/api\/sns\/v6\/homefeed\?
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v10\/search\/notes\?
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/(?:v2\/note\/feed|v3\/note\/videofeed)
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

    - match: ^https:\/\/(?:edith|rec|www)\.xiaohongshu\.com\/api\/sns\/(?:v4\/note\/videofeed|v10\/note\/video\/save)
      name: "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°"
      type: response
      require-body: true

script-providers:
  "ç§»é™¤å›¾ç‰‡å’Œå®å†µç…§ç‰‡æ°´å°":
    url: https://kelee.one/Resource/Script/RedPaper/RedPaper_remove_ads.js
    interval: 86400

rules:
  - AND,((PROTOCOL,QUIC),(DOMAIN-SUFFIX,xiaohongshu.com)),REJECT