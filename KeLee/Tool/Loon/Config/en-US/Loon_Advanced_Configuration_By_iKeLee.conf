# Loon Advanced configuration for automatically selecting the node with the lowest latency
# This configuration file enables you to automatically select the node with the lowest network latency, eliminating the need for manual intervention. The entire process is fully automated. When connected to a router equipped with a transparent proxy, your Loon will establish connections using the "DIRECT" policy, allowing direct access to restricted websites through your router. Conversely, when using other networks, access to these websites will be achieved through Loon's own proxy mode. This prevents potential double-proxy situations that might arise when connected to a router already employing a transparent proxy.
# Date: 2024-07-23 09:48:14
# Author: https://t.me/iKeLee

[General]
ipv6 = false
dns-server = system
# Cloudflare and Goole DoH
doh-server = https://1.1.1.1/dns-query, https://dns.google/dns-query
sni-sniffing = true
disable-stun = false
dns-reject-mode = LoopbackIP
domain-reject-mode = DNS
udp-fallback-mode = REJECT
wifi-access-http-port = 7222
wifi-access-socks5-port = 7221
allow-wifi-access = false
interface-mode = auto
test-timeout = 5
disconnect-on-policy-change = false
switch-node-after-failure-times = 3
internet-test-url = http://www.msftconnecttest.com/connecttest.txt
proxy-test-url = http://www.gstatic.com/generate_204
resource-parser = https://gitlab.com/sub-store/Sub-Store/-/releases/permalink/latest/downloads/sub-store-parser.loon.min.js
geoip-url = https://gitlab.com/Masaiki/GeoIP2-CN/-/raw/release/Country.mmdb
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlynatics.com
bypass-tun = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32



[Proxy]

[Remote Proxy]

[Remote Filter]
Gaming nodes = NameRegex, FilterKey = "^(?=.*((?i)娓告||(\b(GAME)\b)))(?!.*((?i)|″)).*$"
Global nodes = NameRegex, FilterKey = "^(?=.*(.))(?!.*((?i)缇|璇|杩|寰|瀹缃|瀹㈡|缃绔|缃|峰|璁㈤|娴|版|哄|涓娆||瀹|澶|杩|宸茬|绯|绠|宸ュ|璐╁|||叉|藉|板|棰|娉|璇存|浣跨|绀|瑰|璁块||(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$"
Hong Kong nodes = NameRegex, FilterKey = "^(?=.*((?i)|棣娓|(\b(HK|Hong)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"
Taiwan nodes = NameRegex, FilterKey = "^(?=.*((?i)桂|版咕|(\b(TW|Tai|Taiwan)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"
Japan nodes = NameRegex, FilterKey = "^(?=.*((?i)|ユ|宸|涓浜|澶ч|娉|肩|(\b(JP|Japan)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"
South Korea nodes = NameRegex, FilterKey = "^(?=.*((?i)梆|╁||棣灏|(\b(KR|Korea)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"
Singapore nodes = NameRegex, FilterKey = "^(?=.*((?i)葛|板||(\b(SG|Singapore)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"
United States nodes = NameRegex, FilterKey = "^(?=.*((?i)吼|缇|娉㈢瑰|杈炬|淇|ゅ板|璐瑰╄|纭璋|缁村|娲|ｄ濉|ｅ|瑗块||(\b(US|United States)\b)))(?!.*((?i)|″|娓告||(\b(GAME)\b))).*$"

[Proxy Group]
# --------------------------------
# SSID regional scenario strategy
HK Scenario = ssid, default = HK Strategy, cellular = HK Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
TW Scenario = ssid, default = TW Strategy, cellular = TW Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
JP Scenario = ssid, default = JP Strategy, cellular = JP Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
KR Scenario = ssid, default = KP Strategy, cellular = KP Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
SG Scenario = ssid, default = SG Strategy, cellular = SG Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
US Scenario = ssid, default = US Strategy, cellular = US Strategy, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
Gaming scenario = ssid, default = Gaming Selection, cellular = Gaming Selection, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
Select scenario = ssid, default = Global Selection, cellular = Global Selection, "PHICOMM_5G" = DIRECT, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SSID.png
# --------------------------------
# Manually select regional strategy
HK Strategy = select, HK路Lowest latency, HK路Fallback, US路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
TW Strategy = select, TW路Lowest latency, TW路Fallback, TW路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
JP Strategy = select, JP路Lowest latency, JP路Fallback, JP路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
KP Strategy = select, KR路Lowest latency, KR路Fallback, KR路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
SG Strategy = select, SG路Lowest latency, SG路Fallback, SG路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
US Strategy = select, US路Lowest latency, US路Fallback, US路Load balance, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
# --------------------------------
# Automatic strategy group
# Lowest latency
HK路Lowest latency = url-test, Hong Kong nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
TW路Lowest latency = url-test, Taiwan nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
JP路Lowest latency = url-test, Japan nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
KR路Lowest latency = url-test, South Korea nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
SG路Lowest latency = url-test, Singapore nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
US路Lowest latency = url-test, United States nodes, url = http://1.0.0.1, interval = 60, tolerance = 50, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
# --------------------------------
# Fallback
HK路Fallback = fallback, Hong Kong nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
TW路Fallback = fallback, Taiwan nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
JP路Fallback = fallback, Japan nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
KR路Fallback = fallback, South Korea nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
SG路Fallback = fallback, Singapore nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
US路Fallback = fallback, United States nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
# --------------------------------
# Load balance
US路Load balance = load-balance, Hong Kong nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
TW路Load balance = load-balance, Taiwan nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
JP路Load balance = load-balance, Japan nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
KR路Load balance = load-balance, South Korea nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
SG路Load balance = load-balance, Singapore nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
US路Load balance = load-balance, United States nodes, url = http://1.0.0.1, interval = 60, max-timeout = 2000, algorithm = pcc, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
# --------------------------------
# Final strategy fallback
Final Switch = fallback, HK Scenario, TW Scenario, JP Scenario, KR Scenario, SG Scenario, US Scenario, url = http://1.0.0.1, interval = 60, max-timeout = 2000, img-url = https://github.com/shindgewongxj/WHATSINStash/raw/main/icon/fallback.png
# --------------------------------
# Manually select node strategy group
Gaming Selection = select, Gaming nodes, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/GAME.png
Global Selection = select, Global nodes, img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png

[Rule]
# Local Rule
# Type:DOMAIN-SUFFIX,DOMAIN,DOMAIN-KEYWORD,USER-AGENT,URL-REGEX,IP-CIDR,IP-CIDR6,IP-ASN
# Strategy:DIRECT, PROXY, REJECT
# Options:no-resolve(only for cidr)
# IP-CIDR, 192.168.0.0/16, DIRECT
# IP-CIDR, 10.0.0.0/8, DIRECT
# IP-CIDR, 172.16.0.0/12, DIRECT
# IP-CIDR, 127.0.0.0/8, DIRECT
# Replace "cn" in the following line with the English abbreviation of your country.
GEOIP, cn, DIRECT
# This line below does not need any modification.
FINAL, Final Switch

[Remote Rule]
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Telegram/Telegram.list, policy = Final Switch, tag = Telegram, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/TikTok.list, policy = Global Selection, tag = TikTok, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/AI.list, policy = Global Selection, tag = AI, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/ApplePushNotificationService.list, policy = DIRECT, tag = Apple Push Notification Service, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/AppleID.list, policy = DIRECT, tag = Apple ID, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/AppStore.list, policy = DIRECT, tag = App Store, enabled = false
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/GitHub/GitHub.list, policy = Final Switch, tag = GitHub, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Netflix/Netflix.list, policy = SG Scenario, tag = Netflix, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/YouTube/YouTube.list, policy = Final Switch, tag = Youtube, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Disney/Disney.list, policy = Final Switch, tag = Disney, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Twitter/Twitter.list, policy = Final Switch, tag = Twitter, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Facebook/Facebook.list, policy = Final Switch, tag = Facebook, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Instagram/Instagram.list, policy = US Scenario, tag = Instagram, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Spotify/Spotify.list, policy = US Scenario, tag = Spotify, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/Google/Google.list, policy = Final Switch, tag = Google, enabled = true
https://gitlab.com/lodepuly/proxy_tool_resources/-/raw/master/rule/Loon/OneDrive/OneDrive.list, policy = Final Switch, tag = OneDrive, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/LAN, policy = DIRECT, tag = LAN, enabled = true

[Host]
ssid:PHICOMM_5G = server:10.0.0.1

[Rewrite]

[Script]

[Plugin]
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/LoonGallery.plugin, policy = Final Switch, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Spotify_remove_ads.plugin, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/YouTube_remove_ads.plugin, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/QuickSearch.plugin, enabled = false
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Prevent_DNS_Leaks.plugin, policy = Final Switch, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Node_detection_tool.plugin, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/WARP_Node_Query.plugin, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Spotify_lyrics_translation.plugin, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/TestFlight.plugin, policy = DIRECT, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Google.plugin, enabled = false
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Auto_Join_TF.plugin, policy = DIRECT, enabled = false
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/BoxJs.plugin, policy = Final Switch, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Sub-Store.plugin, policy = Final Switch, enabled = true

[Mitm]
hostname = 
ca-p12 = 
ca-passphrase = 
skip-server-cert-verify = false