/***********************************************
> 应用名称：墨鱼自用小红书去广告脚本
> 脚本作者：@ddgksf2013
> 微信账号：墨鱼手记
> 更新时间：2025-02-07
> 通知频道：https://t.me/ddgksf2021
> 贡献投稿：https://t.me/ddgksf2013_bot
> 问题反馈：ddgksf2013@163.com
> 特别提醒：如需转载请注明出处，谢谢合作！
***********************************************/




const version = 'V1.0.24';
const $ = new Env("小红书");
var _0xodR='jsjiami.com.v7';function _0x36e3(){const _0x188d5c=(function(){return[_0xodR,'kRHLjdsRjeiHaemTiB.WchCoILmCK.Kv7xfWTSHK==','5PkP57Ek56656kY0','WQhdS1CF','lbClWP9yimoAksxcPWW','5Pon57wj56YM6kYp','o8omW7PcW5BcKIhdRG','sCkjrt0eg8kWbCoWWOSKjJRdHdbd','W7noW6TQASodDJ7dOuRcOCo+ehuNW6rH','WOKZW6nRmGBcHCkOW6O','WOq/W7zT','W6VdRSotWP1uq8oZW7tdJSocWRlcIa','wr4yWOqtW49CaSoHAIi','FMpdS8k6','WQZdHhNdSG','WOpcNgqekCkRWQvPcbWkW5RcVw0','W47cTWxcSZ4pnSkCW6OfF2q','WOBcR2DG','WPq/W6bQmJZcLmoGWQy','WPRcM28zpCk1','uHjD','WOLyt8kOW4ucBSojh8ovjt/dIa','WOhcUCohWR18WOVcMwvBpCk0amoy','r8kDwaecf8kZcSoBWOSUds/dGJPuWQ4','WOvvW4vB','WO1ur8kSW544y8o4hSovfs3cICkgaCk/hq','W5DMhW','WPmCgrhdGsfd','owxcK8k3ba','W5lcM3CRWRO','ECoGW4xcKa/dM8opWOq7W5f6CKNcNt0','nrWzBwv1rmk9W6HaW7lcPxyffW','rHODWOyzW6nQcG','W4PBktFdTwHrW5hdGZtcT1m','WRddUea0tWDcW48','W4T7gSokW4iC','WQz/Amo+W5BcLmoRwSoSzq','WODkWRy','ue0YW53cQa','phBcJq','W6Omkq','WQ/cQ8ksW4CjeSoDW5BdUq','WOq3W7fGpJlcLq','nufcpq','WP17WONdOSoMecxdPsqt','y8koFvvd','W5ZdRLzJW6RdIbO','uKKSW4/cUCoPWP8LqK9mgmk/W7/dSCo2qq','WPdcJb4yW5FcIuD/W7G','xmkiwtCEfCk2dCow','WP3cOJCTW6pcGJj5W7KRECo5xW','W7VdP8kuhYjEpNbtW5aq','j8oBW5K','WOhcUCohWR18WOVcG3Tyn8kp','WOhcQcK8','bwRdLINdUmo/WOymW50','WPP2WPVdPa','WO7cIhODa2uDjHCkFIupW5DQWQ9h','gWtdOCk5W5a','W5/dJ8ks','WPtcP3DKWRSJWQKeWPCKwW','W7akkSoeW7D+WO7cMCkhW5i8W6HhaG','y8kTqurkCmoLkSkXWRBcQMuiWOG','Aevdy2T8vmkQWPy','EmkHquHeCmoWlSkIWRFcL2CeWO1KgSow','WO3cJNOm','W4ibWOuxCmkKvCoMWPddScS','WOdcLWeCW5ZcGfOJWQe','xSkPxSkb','W4pdGCkhCSkY','W7BcIeSqWO/dK13cQqFcLZdcVq','WP3cRcKxW7FcGJT8WQm9DCojsmkPW5qUFW','gbxdV8kRW4y9','WPbKW6erDmojWPTWfuu','oNdcK8kTd3ubWRNdNG','WP7cSKOeFM/dNmoHyfzyWRldHmotfq','ou7dKI/dLq','i8oDW5K1W7PjWPS+WRlcN8o6W653'].concat((function(){return['WO7cOxq','WO/cMMaopmkVWQmPnbyjWOdcUtpdVWe','W4ddLmkhzmk2W4e','W77dPCks','rHODWOyzW6nWhSoTFdi','WOjeW4rgj8kjESopWOm','WOrjn8kyhLqyECkfDtJcS8otxW','wCoGW5hcVrldGa','wvFcO8oZWOvGWQVdNmoWFW','W48mCMC','WOPYWPZdSq','W6tdO8krhsHNmNTrWOvVheC','tCoWW4/cSrtdNColWRWnW5bXAxdcKsfB','jSoeW6PcW4BcKHVdQmouW7K','CSoYW4X0W5dcQcW','WOtcPmorWRf9WRpcMw1e','WP56WOVdPmo2psNdUa','W7uxpmoiW7zgWOpcKmkj','WOFcMrGq','W7ZdPCkbhrHrpW','kryhFa','s8kDxZ8','WRNdUum','W4dcMSob','vCkHtG','W7RdQ8kgjZvDn3rdWO9unrlcLH3dNSko','WQddIMddTSk/hmkzzGRdMW','WO9ewmkL','WR7cSKiNzwxdK8oOBL1sWRNdVmoPaSozlG','WONdR1/dS35lg8kD','i0q7WROhmcS','yxmKWOWG','WOeCdHJdHXvcW6K9v2fFp8k9','zgFdTmkNWOpcQCoRWQ0QpfG3','WOW3W7rPccNcMmk1W7iV','WPjZW6WFFa','W73dNaK','WRJcSL0Y','zMNdPW','WOlcOSop','zxCLWOS','W4hdOCkAW60LWPdcIfjhpmkz','W7JdMXyu','W4nfwK3cKxWtW6ieA2nZla','oKtcJSoDW7C','WPnCWQK','lHyvEMb4dSk3WQLhW7ZcSZHg','WPnEta','WR/cO1WVF2FdNSorCa','xCkztZWFhCk0nmoAWP0VibFdMZXuWRG2ECktW5JdKW','WPlcGMizkgWqcGq','p8oaW6Pc','WQxdHh7dP8k8c8kJD0lcLW','WPD3W7SPB8ocWQHKe0XPoCo9WPddKLuv','WOfmWQG3xSksihpcNW','qWOkWPCtW5fChCoTAYdcGCkirSouka','j8okW74','WOBcUsGHW6VcGd57WQ4','lwxcLCkL','WOrGWOldUCoIiIxcPsetW47dOmoxyW','WPvfpCkya1mjECk+jNu','WQekqmomW5C','tCkHtSkhWQpdJZ/cS3u','W5dcHSojW5SPW4JdTJm','WOxcHNGif8k2WQqOhXW','r8oQW4y','W7RdIWKDW7NcLL7cNmkRWRzHW7JdKCkgfCkyW6O','W4SbW6TOamodFvhcL8k+WRPTW6u','WRJdHh/dOmk8','DNCIWPSKisu','W4rtma3dNxDcW5BdMW','z3SYWPOQcI3dGt7cIYT0wa','WRNdV1iozb5hW4xcVCoLsCk1sZtcQCkLWRrc','bWRdSSkUW5W7W7ZcS8kVi8oh','WRJcVSkuW48u','W7jcW7LsFCovrtpdVfZcSq','W7jDa8oWW60','WP8CbaNdTZ1jW7qUsG'].concat((function(){return['WPtdNYbj','W7ZdQ8kbetfDbgnyWOntdW','BmoApW','W7/dR8kyhrHioNzCWOTxdW','kmokW6LpW7ZcJc3dS8on','WO18WPJdQCoCiYxdPsK','B1rE','WPdcTConWR1HWRxcHg5Io8kgf8knW74','pHWeCvX8smk3WQ0','WOJcIgui','WOVcKqifW6BcMufRW6xdGG','k0hcJW','WOn2WOZdUCoIed/dQJqzW7ZcRCoooSkXiSk7','WPj3W7ScEmovWPTWfuu','jCokW61tW7ZcJIhdPCosW4OKW7KsW4q','W7BdQ8kbgq','W44chCo4WPTTnSkxomoBfHRcSmk8','ECkRqG','W5DFnIhdJW','dbXwbNO0bsBdOtpcR8kAWQ97','C8kRv2retmoR','WPFdQuJdOLrvf8kDW4K','WRRcNfveWRtdHqNdTCo6W6G','WOPKW6q','W4SMWRHgjmkrW7fHkxTJjCoO','WRrVACoeW5dcIW','W7xcJfSqWPJdQxhcVH7cMWZcUXVdRHbllG','pComW71tW4ZcVYddSSorW7S7W6iwW5a','pSogW5i','W4ZdTgT+WRxdKwnzWQyxq8otEW','u0qHW5ZcQmotWPiuq08','D3S6WOSGjW','W5hcICozW6u','WRNcPui','W5RdIWe+W6lcNfhcLCkLWR1RW7pdQCk8aG','WPrWW7SVAG','W5ZcNmoiW6KU','WPNcV24zmq','WRukrSoE','BgpdPCkQW4/dRa','icfGW4P0zxxcNXNcHrHrimop','bqRdP8kVW6O8W78','F8obpXFdISoCWQu','WP5YWPRdO8oM','ou3cNCoCW7FdLCklbSoxW4W','WRVcIMOVj8kPWQCraHCcWPVcGd/dOW','W41aW6uZx8ocWQS','vbinWOi','l8oeW61x','W7ddPCkraq','naCrzxa','WOFcSCorWQT2','WPf5W7WtqSolWQ12eW','j0dcMmohW7pdLCkrcCohW4z0W5jQWQb5WPJdSa','W4TriW','D0nFW48XfmodeZtcQbNcMG','krCbWPjxlSoKpZxcOXO','qCktxZSVg8k7','ASoCirVdU8osWQJdQ1K','jghcHCkTae0BWR7dKxDEaCo/WPH6W4dcHG','W6hdHCkrq8k4W4pdLmktWQBcSSk7W6b5W44J','W4zMFSkpW5KvBW','WO9qwCk+W48','WPn/W74tqSoxWQXQe0y3rG','Dx0HWPePoIxdIWFcKqzU','kmoBW5mWW7noWOGL','W5rkkYddJW','W7ycpmosW70','WRtcVSktW7evemoyW5hdTmouWRZcPXrlW4WSW7S','WQddHh7dJmkRhmkqy0tcNIFdVSo6px0aya','xHWnWOyPW5bQhCo8','sueHW4NcQmotWO4isq','WOrcW5O','x8oGW5lcPG','mbyqywi','bbFdUSkTW5W7W4tcMCk0iG','W4bBmdBdI2Xr'];}()));}()));}());_0x36e3=function(){return _0x188d5c;};return _0x36e3();};const _0xdf40e5=_0x1837;function _0x1837(_0x466a5e,_0x115134){const _0x36e328=_0x36e3();return _0x1837=function(_0x183779,_0x2f9246){_0x183779=_0x183779-0x178;let _0xe7b0e4=_0x36e328[_0x183779];if(_0x1837['SaZPov']===undefined){var _0xa134a1=function(_0x33e0c7){const _0x2d0c5d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x46c683='',_0x15b941='';for(let _0x47ad39=0x0,_0x42ef8d,_0x55aee6,_0x2595ae=0x0;_0x55aee6=_0x33e0c7['charAt'](_0x2595ae++);~_0x55aee6&&(_0x42ef8d=_0x47ad39%0x4?_0x42ef8d*0x40+_0x55aee6:_0x55aee6,_0x47ad39++%0x4)?_0x46c683+=String['fromCharCode'](0xff&_0x42ef8d>>(-0x2*_0x47ad39&0x6)):0x0){_0x55aee6=_0x2d0c5d['indexOf'](_0x55aee6);}for(let _0x2ecc76=0x0,_0x2c0e17=_0x46c683['length'];_0x2ecc76<_0x2c0e17;_0x2ecc76++){_0x15b941+='%'+('00'+_0x46c683['charCodeAt'](_0x2ecc76)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x15b941);};const _0x44deb5=function(_0x247937,_0x149ce1){let _0x6c3c97=[],_0xac5f84=0x0,_0x212c23,_0x589338='';_0x247937=_0xa134a1(_0x247937);let _0x14ddba;for(_0x14ddba=0x0;_0x14ddba<0x100;_0x14ddba++){_0x6c3c97[_0x14ddba]=_0x14ddba;}for(_0x14ddba=0x0;_0x14ddba<0x100;_0x14ddba++){_0xac5f84=(_0xac5f84+_0x6c3c97[_0x14ddba]+_0x149ce1['charCodeAt'](_0x14ddba%_0x149ce1['length']))%0x100,_0x212c23=_0x6c3c97[_0x14ddba],_0x6c3c97[_0x14ddba]=_0x6c3c97[_0xac5f84],_0x6c3c97[_0xac5f84]=_0x212c23;}_0x14ddba=0x0,_0xac5f84=0x0;for(let _0x2719c6=0x0;_0x2719c6<_0x247937['length'];_0x2719c6++){_0x14ddba=(_0x14ddba+0x1)%0x100,_0xac5f84=(_0xac5f84+_0x6c3c97[_0x14ddba])%0x100,_0x212c23=_0x6c3c97[_0x14ddba],_0x6c3c97[_0x14ddba]=_0x6c3c97[_0xac5f84],_0x6c3c97[_0xac5f84]=_0x212c23,_0x589338+=String['fromCharCode'](_0x247937['charCodeAt'](_0x2719c6)^_0x6c3c97[(_0x6c3c97[_0x14ddba]+_0x6c3c97[_0xac5f84])%0x100]);}return _0x589338;};_0x1837['yavaFe']=_0x44deb5,_0x466a5e=arguments,_0x1837['SaZPov']=!![];}const _0x2bd6e2=_0x36e328[0x0],_0x5a39ca=_0x183779+_0x2bd6e2,_0xafe2c8=_0x466a5e[_0x5a39ca];return!_0xafe2c8?(_0x1837['OHxFTl']===undefined&&(_0x1837['OHxFTl']=!![]),_0xe7b0e4=_0x1837['yavaFe'](_0xe7b0e4,_0x2f9246),_0x466a5e[_0x5a39ca]=_0xe7b0e4):_0xe7b0e4=_0xafe2c8,_0xe7b0e4;},_0x1837(_0x466a5e,_0x115134);}(function(_0x35dfdd,_0x46fdda,_0x423c88,_0x1d3005,_0x4799dc,_0x516fc5,_0x220b0d){return _0x35dfdd=_0x35dfdd>>0x7,_0x516fc5='hs',_0x220b0d='hs',function(_0x307194,_0x46d35b,_0xe2d6d2,_0x78fe7f,_0x45625b){const _0x4d4498=_0x1837;_0x78fe7f='tfi',_0x516fc5=_0x78fe7f+_0x516fc5,_0x45625b='up',_0x220b0d+=_0x45625b,_0x516fc5=_0xe2d6d2(_0x516fc5),_0x220b0d=_0xe2d6d2(_0x220b0d),_0xe2d6d2=0x0;const _0x1baddf=_0x307194();while(!![]&&--_0x1d3005+_0x46d35b){try{_0x78fe7f=parseInt(_0x4d4498(0x228,'Y(K)'))/0x1+-parseInt(_0x4d4498(0x19d,'kEpn'))/0x2*(parseInt(_0x4d4498(0x205,'V$fZ'))/0x3)+parseInt(_0x4d4498(0x223,'Vvax'))/0x4+-parseInt(_0x4d4498(0x1aa,'0[pm'))/0x5+parseInt(_0x4d4498(0x1a8,'zu@R'))/0x6*(parseInt(_0x4d4498(0x257,'WQZj'))/0x7)+parseInt(_0x4d4498(0x1ea,'(XOT'))/0x8+parseInt(_0x4d4498(0x20a,'ZbNj'))/0x9*(-parseInt(_0x4d4498(0x1f5,'kEpn'))/0xa);}catch(_0x23d9c3){_0x78fe7f=_0xe2d6d2;}finally{_0x45625b=_0x1baddf[_0x516fc5]();if(_0x35dfdd<=_0x1d3005)_0xe2d6d2?_0x4799dc?_0x78fe7f=_0x45625b:_0x4799dc=_0x45625b:_0xe2d6d2=_0x45625b;else{if(_0xe2d6d2==_0x4799dc['replace'](/[CSkBRHhKWxeTfLdI=]/g,'')){if(_0x78fe7f===_0x46d35b){_0x1baddf['un'+_0x516fc5](_0x45625b);break;}_0x1baddf[_0x220b0d](_0x45625b);}}}}}(_0x423c88,_0x46fdda,function(_0x52d091,_0x4c0bf9,_0xbf82c4,_0x4329d8,_0x5ae4da,_0x250e0f,_0x1ecd49){return _0x4c0bf9='\x73\x70\x6c\x69\x74',_0x52d091=arguments[0x0],_0x52d091=_0x52d091[_0x4c0bf9](''),_0xbf82c4='\x72\x65\x76\x65\x72\x73\x65',_0x52d091=_0x52d091[_0xbf82c4]('\x76'),_0x4329d8='\x6a\x6f\x69\x6e',(0x196b32,_0x52d091[_0x4329d8](''));});}(0x6300,0xc2cfb,_0x36e3,0xc8),_0x36e3)&&(_0xodR=_0xdf40e5(0x1ba,'g&En'));$['RedBookPhotoKey']='redbook_user_photo_key',$[_0xdf40e5(0x236,'I&NS')]=_0xdf40e5(0x1b0,'Pb[d');let body=$response[_0xdf40e5(0x1fe,'tb)y')];if(body){switch(!![]){case/api\/sns\/v\d+\/note\/widgets/[_0xdf40e5(0x21b,'p7mb')]($request[_0xdf40e5(0x1e4,'ylJp')]):try{let obj=JSON[_0xdf40e5(0x210,'tAX4')](body);const propertiesToDelete=[_0xdf40e5(0x1e0,'5M9I'),_0xdf40e5(0x1db,'c^p#')];for(const prop of propertiesToDelete){obj[_0xdf40e5(0x229,']jIo')]?.[prop]&&delete obj['data'][prop];}body=JSON['stringify'](obj);}catch(_0x432782){console[_0xdf40e5(0x1ae,'ZbNj')](_0xdf40e5(0x1bd,'tYA&')+_0x432782);}break;case/api\/sns\/v\d+\/note\/live_photo\/save/[_0xdf40e5(0x1a7,'kEpn')]($request[_0xdf40e5(0x196,'BE2R')]):try{let obj=JSON[_0xdf40e5(0x1ab,'@qXn')](body);obj[_0xdf40e5(0x226,'!LU3')][_0xdf40e5(0x1c9,'Vvax')]=JSON['parse']($[_0xdf40e5(0x219,'2OdI')]($[_0xdf40e5(0x209,'^myL')])),body=JSON['stringify'](obj);}catch(_0x449cb5){console['log'](_0xdf40e5(0x20c,'ylJp')+_0x449cb5);}break;case/api\/sns\/v\d+\/note\/video\/save/[_0xdf40e5(0x1a4,'JPEi')]($request[_0xdf40e5(0x23f,'dat4')]):try{let obj=JSON['parse'](body),tmp=JSON[_0xdf40e5(0x210,'tAX4')]($[_0xdf40e5(0x1c4,'kEpn')]($[_0xdf40e5(0x1fa,'mjQb')]));for(let module of tmp){module[_0xdf40e5(0x206,'Pb[d')]==obj[_0xdf40e5(0x259,'mjQb')]['note_id']&&(obj[_0xdf40e5(0x1ed,'BE2R')]=module);}body=JSON[_0xdf40e5(0x17b,'dat4')](obj);}catch(_0x46ebb5){console[_0xdf40e5(0x1b7,'c^p#')](_0xdf40e5(0x246,'%$0r')+_0x46ebb5);}break;case/api\/sns\/v\d+\/note\/comment\/list/['test']($request['url']):try{let obj=JSON[_0xdf40e5(0x23e,'LRoG')](body);for(let module of obj[_0xdf40e5(0x1dc,'tb)y')][_0xdf40e5(0x20e,'j@Ig')]){if(module['pictures'])for(let item of module[_0xdf40e5(0x18f,'g&En')]){item['meme_package']?.['image_url']&&(item[_0xdf40e5(0x17a,'ylJp')]=item[_0xdf40e5(0x239,'2OdI')][_0xdf40e5(0x24f,'q$E5')],item['url']=item[_0xdf40e5(0x1d0,'tb)y')]['image_url']);}}body=JSON[_0xdf40e5(0x241,'Vvax')](obj);}catch(_0x3ada57){console[_0xdf40e5(0x203,'2OdI')](_0xdf40e5(0x25b,'xxzb')+_0x3ada57);}break;case/api\/sns\/v\d+\/note\/redtube/[_0xdf40e5(0x225,'zFgm')]($request[_0xdf40e5(0x23d,'FGzQ')]):try{let obj=JSON[_0xdf40e5(0x25d,'^myL')](body);for(let module of obj[_0xdf40e5(0x191,'xxzb')][_0xdf40e5(0x1f1,'BE2R')]){module[_0xdf40e5(0x19b,'JPEi')]&&(module[_0xdf40e5(0x251,'3CD5')]=0x0),module[_0xdf40e5(0x198,'tb)y')]&&(module['has_related_goods']=![]),module[_0xdf40e5(0x1d9,'g&En')]&&(module[_0xdf40e5(0x208,'dat4')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]}),module[_0xdf40e5(0x244,'g&En')]&&(module['share_info'][_0xdf40e5(0x21f,'Pb[d')]=[{'type':_0xdf40e5(0x255,'tAX4')},{'type':_0xdf40e5(0x1d4,'zu@R')},{'type':_0xdf40e5(0x1d1,'c^p#')},{'type':_0xdf40e5(0x1ce,'tb)y')},{'type':_0xdf40e5(0x24d,'zu@R')},{'type':_0xdf40e5(0x242,'H!Ml')},{'type':'report'},{'type':'video_feedback'}]);}body=JSON[_0xdf40e5(0x1b8,'(XOT')](obj);}catch(_0x154db0){console[_0xdf40e5(0x1de,'g[G4')]('redtube:\x20'+_0x154db0);}break;case/api\/sns\/v\d+\/note\/videofeed/[_0xdf40e5(0x230,'E3UY')]($request[_0xdf40e5(0x1cf,'#Y1N')]):try{let obj=JSON['parse'](body),datas=[];for(let module of obj['data']){module['related_goods_num']&&(module['related_goods_num']=0x0);module[_0xdf40e5(0x1b4,'ylJp')]&&(module['has_related_goods']=![]);module[_0xdf40e5(0x1e7,'UDHa')]&&(module['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]});module['share_info']&&(module[_0xdf40e5(0x1eb,'LRoG')][_0xdf40e5(0x180,'mjQb')]=[{'type':_0xdf40e5(0x19f,'0[pm')},{'type':'generate_image'},{'type':_0xdf40e5(0x1d5,'WQZj')},{'type':_0xdf40e5(0x1a0,'zFgm')},{'type':_0xdf40e5(0x254,']jIo')},{'type':_0xdf40e5(0x233,'0[pm')},{'type':'report'},{'type':_0xdf40e5(0x256,'g[G4')}]);if(module[_0xdf40e5(0x1c6,'kEpn')]?.['media']?.[_0xdf40e5(0x1e6,'9SGB')]?.['h265']){let idata={};idata[_0xdf40e5(0x22b,'mjQb')]=0x2,idata[_0xdf40e5(0x1f6,'nXj@')]=module['id'],idata['download_url']=module[_0xdf40e5(0x22d,'ZbNj')]['media']['stream'][_0xdf40e5(0x1cd,'3CD5')][0x0][_0xdf40e5(0x1b3,'!LU3')],datas[_0xdf40e5(0x19a,'ZbNj')](idata);}}$['setdata'](JSON[_0xdf40e5(0x1b5,'FGzQ')](datas),$[_0xdf40e5(0x17c,'JPEi')]),body=JSON[_0xdf40e5(0x190,'tAX4')](obj);}catch(_0xd37911){console[_0xdf40e5(0x182,'tb)y')](_0xdf40e5(0x1bb,'YSZ8')+_0xd37911);}break;case/api\/sns\/v\d+\/note\/tabfeed/['test']($request[_0xdf40e5(0x1e9,'j@Ig')]):try{let obj=JSON[_0xdf40e5(0x1f8,'g&En')](body),datas=[];for(let module of obj['data']['items']){module[_0xdf40e5(0x1c1,'p]6i')]&&(module['related_goods_num']=0x0);module[_0xdf40e5(0x22f,'Pb[d')]&&(module[_0xdf40e5(0x178,'(XOT')]=![]);module[_0xdf40e5(0x202,'@qXn')]&&(module['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]});module[_0xdf40e5(0x1f9,'@qXn')]&&(module['share_info'][_0xdf40e5(0x18b,'I&NS')]=[{'type':_0xdf40e5(0x1e8,'c^p#')},{'type':_0xdf40e5(0x185,'YSZ8')},{'type':_0xdf40e5(0x1d2,'g&En')},{'type':_0xdf40e5(0x25e,'UDHa')},{'type':_0xdf40e5(0x183,'dYIp')},{'type':'dislike'},{'type':_0xdf40e5(0x186,'I&NS')},{'type':'video_feedback'}]);if(module[_0xdf40e5(0x22e,'zu@R')]?.[_0xdf40e5(0x217,'WQZj')]?.['stream']?.[_0xdf40e5(0x188,'2OdI')]){let idata={};idata[_0xdf40e5(0x23b,'a*)g')]=0x2,idata[_0xdf40e5(0x192,'tb)y')]=module['id'],idata[_0xdf40e5(0x20d,'kEpn')]=module[_0xdf40e5(0x18a,'tb)y')]['media'][_0xdf40e5(0x181,'^myL')][_0xdf40e5(0x243,'WQZj')][0x0][_0xdf40e5(0x1da,'ylJp')],datas[_0xdf40e5(0x1a9,'p]6i')](idata);}}$['setdata'](JSON[_0xdf40e5(0x249,'Pb[d')](datas),$[_0xdf40e5(0x1ef,'p]6i')]),body=JSON[_0xdf40e5(0x184,'E3UY')](obj);}catch(_0x307960){console[_0xdf40e5(0x1c0,'I&NS')](_0xdf40e5(0x22a,'H!Ml')+_0x307960);}break;case/api\/sns\/v\d+\/note\/feed/[_0xdf40e5(0x21b,'p7mb')]($request[_0xdf40e5(0x1a3,'p]6i')]):try{let obj=JSON[_0xdf40e5(0x20b,'ZbNj')](body);for(let module of obj[_0xdf40e5(0x1b9,'dat4')]){module['related_goods_num']&&(module[_0xdf40e5(0x247,'LRoG')]=0x0);module[_0xdf40e5(0x211,'Vvax')]&&(module[_0xdf40e5(0x220,'Y4[S')]=![]);if(module[_0xdf40e5(0x1e2,'Y(K)')])for(let item of module[_0xdf40e5(0x201,'ylJp')]){item['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};}}body=JSON[_0xdf40e5(0x1af,'JPEi')](obj);}catch(_0x168b75){console[_0xdf40e5(0x1a5,'zFgm')](_0xdf40e5(0x1f4,'zFgm')+_0x168b75);}break;case/api\/sns\/v\d+\/note\/imagefeed/[_0xdf40e5(0x24e,'(XOT')]($request[_0xdf40e5(0x1d3,'V$fZ')]):try{let obj=JSON[_0xdf40e5(0x1c3,'!LU3')](body),datas=[];for(let module of obj[_0xdf40e5(0x1fd,'c^p#')]){module[_0xdf40e5(0x231,'ZbNj')]&&(module['related_goods_num']=0x0);module[_0xdf40e5(0x212,'!LU3')]&&(module['has_related_goods']=![]);if(module[_0xdf40e5(0x213,'dYIp')])for(let item of module[_0xdf40e5(0x1b1,'3CD5')]){item[_0xdf40e5(0x258,'g[G4')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};if(item[_0xdf40e5(0x1ca,'Y4[S')])for(let it of item[_0xdf40e5(0x224,'dYIp')]){if(it['live_photo']){let idata={};idata['video_id']=it[_0xdf40e5(0x1a1,'H!Ml')]['media'][_0xdf40e5(0x238,'dYIp')],idata[_0xdf40e5(0x1f7,'#Y1N')]=it[_0xdf40e5(0x1c7,'p7mb')],idata[_0xdf40e5(0x1a6,'zu@R')]=it[_0xdf40e5(0x1bf,'mjQb')][_0xdf40e5(0x1a2,'ylJp')]['stream']['h265'][0x0][_0xdf40e5(0x18c,'c^p#')],datas['push'](idata);}}}}$['setdata'](JSON['stringify'](datas),$['RedBookPhotoKey']),body=JSON['stringify'](obj);}catch(_0x23839e){console[_0xdf40e5(0x24c,'j@Ig')](_0xdf40e5(0x24b,'tb)y')+_0x23839e);}break;case/api\/sns\/v\d+\/homefeed\/categories\?/[_0xdf40e5(0x250,'g&En')]($request[_0xdf40e5(0x1a3,'p]6i')]):try{let obj=JSON[_0xdf40e5(0x1df,'2OdI')](body);obj['data']['categories']=obj['data']['categories']['filter'](_0x2df624=>!(_0x2df624[_0xdf40e5(0x22c,'5M9I')]==_0xdf40e5(0x24a,'(XOT')||_0x2df624[_0xdf40e5(0x232,'a*)g')]==_0xdf40e5(0x237,'WQZj')||_0x2df624[_0xdf40e5(0x197,'tYA&')]=='homefeed.live')),body=JSON[_0xdf40e5(0x248,'xxzb')](obj);}catch(_0x36ceac){console[_0xdf40e5(0x195,'p7mb')]('categories:\x20'+_0x36ceac);}break;case/api\/sns\/v\d+\/search\/hint/[_0xdf40e5(0x193,'WQZj')]($request['url']):try{let obj=JSON[_0xdf40e5(0x252,'nXj@')](body);obj[_0xdf40e5(0x194,'Pb[d')]?.[_0xdf40e5(0x1d7,'xxzb')]&&(obj['data'][_0xdf40e5(0x1cc,'0[pm')]=[{'title':_0xdf40e5(0x21d,'[)RT'),'type':'firstEnterOther#itemCfRecWord#搜索笔记#1','search_word':_0xdf40e5(0x21a,'BE2R')}]),body=JSON[_0xdf40e5(0x18e,'zu@R')](obj);}catch(_0x431476){console[_0xdf40e5(0x240,'tAX4')]('hint:\x20'+_0x431476);}break;case/api\/sns\/v\d+\/search\/hot_list/[_0xdf40e5(0x216,'I&NS')]($request['url']):try{let obj=JSON[_0xdf40e5(0x200,'zu@R')](body);obj['data']={'scene':'','title':'','items':[],'host':'','background_color':{},'word_request_id':''},body=JSON[_0xdf40e5(0x207,'#Y1N')](obj);}catch(_0x2561ee){console[_0xdf40e5(0x1ae,'ZbNj')]('hot_list:\x20'+_0x2561ee);}break;case/api\/sns\/v\d+\/search\/trending/[_0xdf40e5(0x1a4,'JPEi')]($request[_0xdf40e5(0x1ee,'JPEi')]):try{let obj=JSON[_0xdf40e5(0x1bc,'[)RT')](body);obj[_0xdf40e5(0x25c,'tYA&')]={'title':'','queries':[],'type':'','word_request_id':''},body=JSON['stringify'](obj);}catch(_0x255c0e){console[_0xdf40e5(0x253,'^myL')]('trending:\x20'+_0x255c0e);}break;case/api\/sns\/v\d+\/system_service\/splash_config/[_0xdf40e5(0x1a7,'kEpn')]($request['url']):try{let obj=JSON[_0xdf40e5(0x234,'dat4')](body);obj[_0xdf40e5(0x189,'g&En')][_0xdf40e5(0x23c,'9SGB')][_0xdf40e5(0x1e1,'g[G4')](_0x25f110=>{const _0x3a4db4=_0xdf40e5,_0x154c6a={'JrHRC':_0x3a4db4(0x1e3,'p]6i'),'UIeaH':_0x3a4db4(0x21e,'c^p#'),'vJXtf':_0x3a4db4(0x187,'nXj@'),'kfsYw':function(_0x49d541,_0x11126b){return _0x49d541===_0x11126b;},'eRxeF':_0x3a4db4(0x1cb,'a*)g')};_0x25f110['start_time']=_0x154c6a['JrHRC'],_0x25f110[_0x3a4db4(0x23a,'p7mb')]=_0x154c6a[_0x3a4db4(0x245,'g[G4')];if(_0x25f110[_0x3a4db4(0x1ac,'FGzQ')]){if(_0x154c6a[_0x3a4db4(0x1f0,'ylJp')](_0x154c6a[_0x3a4db4(0x1f2,'3CD5')],'JRxNZ'))_0x25f110[_0x3a4db4(0x1d8,'@qXn')]['forEach'](_0x511475=>{const _0xc2b576=_0x3a4db4;_0x511475['start_time']=_0x154c6a[_0xc2b576(0x235,'UDHa')],_0x511475[_0xc2b576(0x1be,'BE2R')]='2209050061';});else{if(_0x54e67c[_0x3a4db4(0x19c,'Y(K)')])for(let _0x11bc58 of _0x610a8b[_0x154c6a[_0x3a4db4(0x17d,'q$E5')]]){_0x11bc58[_0x3a4db4(0x204,'V$fZ')]?.[_0x3a4db4(0x214,'LRoG')]&&(_0x11bc58[_0x3a4db4(0x218,'nXj@')]=_0x11bc58['meme_package'][_0x3a4db4(0x221,'H!Ml')],_0x11bc58[_0x3a4db4(0x196,'BE2R')]=_0x11bc58['meme_package']['image_url']);}}}}),body=JSON['stringify'](obj);}catch(_0x439801){console[_0xdf40e5(0x17f,']jIo')]('splash_config:\x20'+_0x439801);}break;case/api\/sns\/v\d+\/homefeed\?/[_0xdf40e5(0x250,'g&En')]($request[_0xdf40e5(0x1cf,'#Y1N')]):try{let obj=JSON[_0xdf40e5(0x234,'dat4')](body);obj[_0xdf40e5(0x189,'g&En')]=obj['data']['filter'](_0x4f3721=>!_0x4f3721['is_ads']),body=JSON['stringify'](obj);}catch(_0x54a5a7){console['log'](_0xdf40e5(0x199,'!LU3')+_0x54a5a7);}break;case/api\/sns\/v\d+\/search\/notes\?/[_0xdf40e5(0x1b2,'c^p#')]($request[_0xdf40e5(0x215,'E3UY')]):try{let obj=JSON[_0xdf40e5(0x19e,'kEpn')](body);obj[_0xdf40e5(0x222,'H!Ml')][_0xdf40e5(0x1ff,'WQZj')]=obj[_0xdf40e5(0x1f3,'[)RT')]['items'][_0xdf40e5(0x1ec,'kEpn')](_0x372dd1=>!_0x372dd1['ads']),body=JSON[_0xdf40e5(0x248,'xxzb')](obj);}catch(_0x1d1ebe){console[_0xdf40e5(0x1b7,'c^p#')](_0xdf40e5(0x1ad,'WQZj')+_0x1d1ebe);}break;case/api\/sns\/v\d+\/system_service\/config\?/[_0xdf40e5(0x1d6,'3CD5')]($request['url']):try{let obj=JSON['parse'](body);const propertiesToDelete=[_0xdf40e5(0x20f,'2OdI'),_0xdf40e5(0x179,'nXj@'),_0xdf40e5(0x1c8,'nXj@'),'app_theme',_0xdf40e5(0x1c5,'2OdI'),_0xdf40e5(0x17e,'j@Ig')];for(const prop of propertiesToDelete){obj[_0xdf40e5(0x1fd,'c^p#')]?.[prop]&&delete obj[_0xdf40e5(0x1fc,'dYIp')][prop];}body=JSON['stringify'](obj);}catch(_0x1e0659){console['log'](_0xdf40e5(0x1b6,'dYIp')+_0x1e0659);}break;default:$done({});break;}$done({'body':body});}else $done({});var version_ = 'jsjiami.com.v7';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e)} isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = [""]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
